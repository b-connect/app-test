"use strict";angular.module("bcApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngMaterial","ngCordova","ui.router","ngStorage","masonry"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/home/news"),a.state("home",{url:"/home",template:"<ui-view />","abstract":!0}).state("home.news",{url:"/news",templateUrl:"views/news.html",controller:"NewsCtrl"}).state("home.about",{url:"/about",templateUrl:"views/about.html",controller:"NewsCtrl"}).state("home.news.detail",{url:"/news/:id",templateUrl:"views/news-detail.html",controller:"NewsCtrl"})}]).config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("blue",{"default":"400","hue-1":"50","hue-2":"600","hue-3":"A100"}).accentPalette("purple",{"default":"200"})}]).config(["$httpProvider",function(a){a.defaults.useXDomain=!0}]).config(["$mdIconProvider",function(a){a.icon("alarm","images/svg/wifi9.svg")}]),angular.module("bcApp").controller("MainCtrl",["$scope","$mdSidenav",function(a,b){a.openLeftMenu=function(){b("left").toggle()}}]),angular.module("bcApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("bcApp").controller("NewsCtrl",["$scope","Content",function(a,b){b.getContent(function(b){a.stories=b.list})}]),angular.module("bcApp").service("Content",["$http","Cache",function(a,b){var c={runnings:[],caseStudyUrl:"https://www.drupal.org/api-d7/node.json?type=casestudy&field_status=featured",isRunning:function(a){return c.runnings[a]},getContent:function(d){var e=!1;return(e=b.getCache(c.caseStudyUrl))&&(console.log("Cached"),d(e.data)),c.isRunning(c.caseStudyUrl)?void console.log("Already running. Wait please"):(c.runnings[c.caseStudyUrl]=!0,a.get(c.caseStudyUrl).success(function(a){var e=a.list.slice(0,10),f=e.length;e.forEach(function(e,g){c.getImage(e.field_mainimage.file.id,function(e){f--,a.list[g].field_mainimage.file.url=e,0===f&&(b.setCache(c.caseStudyUrl,a,360),c.runnings[c.caseStudyUrl]&&delete c.runnings[c.caseStudyUrl],d(a))})})}))},getImage:function(b,c){return a.get("https://www.drupal.org/api-d7/file/"+b+".json").success(function(a){c(a.url)})}};return c}]),angular.module("bcApp").service("Cache",["$localStorage",function(a){return{setCache:function(b,c,d){a[b]={date:(new Date).getTime(),expire:100*d,data:c}},clearCache:function(b){b?a[b]&&delete a[b]:a=[]},getCache:function(b){return a[b]?-1===a[b].expire?a[b]:a[b].date>(new Date).getTime()-a[b].expire?(console.log("Cached"),a[b]):(console.log("Expired"),!1):!1}}}]);